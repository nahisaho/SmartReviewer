# 要件定義書

## ドキュメントレビュー支援AIエージェント（SmartReviewer）

---

**文書管理情報**
- 文書ID: REQ-001
- バージョン: 1.2.0
- 作成日: 2026-01-06
- 更新日: 2026-01-06
- ステータス: Draft

---

## 1. プロジェクト概要

### 1.1 プロジェクト名
第三者検証業務におけるドキュメントレビュー支援AIエージェントの設計開発に係る調査研究

### 1.2 背景
「デジタル社会の実現に向けた重点計画」（令和7年6月閣議決定）において、政府は生成AIをはじめとするAIの社会実装を促進し、業務の効率化・省力化を図ることが喫緊の課題とされている。

現在のシステム開発プロジェクトにおけるレビュー業務には以下の課題がある：
- 設計書やテスト計画書等の成果物レビューは専門性の高い作業
- デジタル・ガバメント推進標準ガイドライン群への準拠確認が必要
- 人的リソースへの依存によるレビュー品質の属人化
- 専門人材への過度な負荷
- システム開発案件増加に伴う品質確保と効率性の両立が急務

### 1.3 目的
生成AIを活用したドキュメントレビュー支援AIエージェントの技術的実現可能性を2ヶ月間の技術検証により明らかにすること。

> **注記**: 本調達は調査研究としての技術検証であり、完成したシステムの開発を目的とするものではない。

### 1.4 期待する効果

| # | 効果 | 説明 |
|---|------|------|
| 1 | 技術的実現可能性の明確化 | 生成AIを活用したドキュメントレビュー支援の技術的実現可能性を、具体的な評価指標とともに明らかにする |
| 2 | 本格導入に向けた課題と対応方針の整理 | MVP レベルでのPoC実施を通じて、技術面・運用面・セキュリティ面等における具体的な課題を洗い出す |
| 3 | 段階的拡張に向けた年間計画試案の策定 | 庁内AI検証環境への統合、ドキュメントレビュー対象範囲の段階的拡大、機能の高度化 |

---

## 2. スコープ定義

### 2.1 対象範囲（In Scope）

#### MVP範囲
| 項目 | 内容 |
|------|------|
| チェック対象文書種別 | 2種類（基本設計書、全体テスト計画書を想定） |
| チェック項目 | 優先度の高いチェック項目各文書上位10項目程度 |
| 評価用データセット | 対象文書各10件程度（合計20件程度） |

### 2.2 対象外（Out of Scope）
- 完成したシステムの開発
- 本番環境への導入
- 運用体制の整備（次年度以降の予定）

---

## 3. 機能要件

### 優先度定義

| 優先度 | 定義 | 対応方針 |
|--------|------|----------|
| Critical | MVP達成に必須。未実装の場合PoCが成立しない | 必ず実装 |
| High | PoC品質に大きく影響。技術検証の主要対象 | 原則実装 |
| Medium | あれば望ましいが、工数次第で次年度に延期可 | 工数に応じて判断 |
| Low | 将来的な拡張機能 | 次年度以降 |

### 3.1 AI活用方針定義機能

#### FR-001: 利用シナリオの具体化
- **説明**: PJMO、クオリティサポートの業務フローに基づく利用シナリオを定義する
- **優先度**: High
- **受入基準**: 業務フローに沿った利用シナリオが文書化されていること

#### FR-002: データ収集・整備機能
- **説明**: チェックリスト選定、ガイドラインRAG化、評価用データセット作成を行う
- **優先度**: High
- **受入基準**: 
  - チェックリストがAIで利用可能な形式に変換されていること
  - ガイドラインがRAG用にベクトル化されていること

#### FR-003: LLM/Embeddingモデル選定
- **説明**: 庁内で利用可能なLLMから適切なモデルを選定する
- **優先度**: High
- **受入基準**: モデル選定理由と評価結果が文書化されていること

### 3.2 ドキュメントレビュー機能

#### FR-004: ドキュメントチェック機能
- **説明**: 設計書・テスト計画書等のドキュメントに対してAIによるチェックを実行する
- **優先度**: Critical
- **受入基準**: 
  - 指定されたチェック項目に対する判定結果が出力されること
  - チェック合致率が測定可能であること

#### FR-005: 大容量文書処理機能
- **説明**: 数万〜数十万文字の大容量文書に対する効率的な処理を行う
- **優先度**: High
- **受入基準**: 
  - 文書分割、事前要約、必要箇所の抽出が適切に行われること
  - 軽量モデルと高性能モデルの使い分けが可能であること

#### FR-006: リッチドキュメント処理機能
- **説明**: 図表等のリッチコンテンツを含むドキュメントを処理する
- **優先度**: Medium
- **受入基準**: 図表を含むドキュメントの処理ができること

#### FR-007: 是正提案機能
- **説明**: AIによるレビュー指摘事項に対する是正提案を生成する
- **優先度**: High
- **受入基準**: 
  - 是正提案が生成されること
  - 是正提案の妥当性が評価可能であること

### 3.3 評価・検証機能

#### FR-008: 回帰テスト環境
- **説明**: AIが生成する是正提案の妥当性を継続的に評価・改善するための評価基盤
- **優先度**: High
- **受入基準**: 
  - 評価結果の蓄積・比較ができること
  - 回帰テストが自動実行可能であること

### 3.4 UI/UX機能

#### FR-009: ユーザーインターフェース
- **説明**: 庁内AI環境（源内）における技術的制約を考慮したUI/UXを提供する
- **優先度**: High
- **受入基準**: 
  - 庁内AI環境の制約（UI/UX、入出力形式、権限管理、監査要件等）に適合していること

---

## 4. 非機能要件

### 4.1 性能要件

| ID | 要件 | 指標 | 目標値（仮説） | 備考 |
|----|------|------|----------------|------|
| NFR-001 | 処理時間 | ドキュメント1件あたりの処理時間 | ≤ 5分 | 10万文字程度の文書を想定 |
| NFR-002 | 推論コスト | 1件あたりのAPI呼び出しコスト | ≤ $1.00 | LLMトークン消費量に依存 |
| NFR-003 | 再現性 | 同一入力に対する出力の一貫性 | ≥ 90% | temperature=0での判定一致率 |

> **注記**: 目標値は仮説であり、PoC実施後に妥当性を検証し調整する

### 4.2 セキュリティ要件

#### NFR-004: 機密情報保護
- **説明**: AI へ入出力されるデータがAIの学習に利用されるなどして、外部へ漏洩しないことを担保する
- **準拠規格**: 
  - 政府機関等のサイバーセキュリティ対策のための統一基準
  - デジタル庁 行政の進化と革新のための生成AIの調達・利活用に係るガイドライン

#### NFR-005: アクセス制御
- **説明**: 権限の範囲で利用可能とする適切なアクセス制御を実装する

#### NFR-006: 監査ログ
- **説明**: システムの利用記録、例外的事象の発生に関するログを蓄積する
- **要件**: 
  - ログに対するアクセス制御機能
  - ログのアーカイブデータの保護

### 4.3 可用性要件

| ID | 要件 | 説明 |
|----|------|------|
| NFR-007 | 冗長性 | クラウドサービスの可用性を保証するための十分な冗長性 |
| NFR-008 | 障害復旧 | 障害時の円滑な切替え等の対策 |

### 4.4 運用・保守要件

#### NFR-009: 環境要件
- **説明**: 庁内AI環境（源内）との統合を考慮した設計
- **制約**: ISMAPクラウドサービスリストまたはISMAP-LIUクラウドサービスリストに登録されているクラウドサービスを使用

#### NFR-010: 可搬性
- **説明**: 特定の事業者しか使用できない技術、製品、サービス等に依存しない
- **要件**: PoCの結果が特定の事業者以外の環境においても再現可能であること

---

## 5. 技術アーキテクチャ要件

### 5.1 知識表現アーキテクチャ

ドキュメントレビューの精度と信頼性を高めるため、オントロジー工学に基づいた知識データとハイブリッドRAGアプローチを採用する。

#### 5.1.1 アーキテクチャ概要

```
[ハイブリッドRAGアーキテクチャ]

                    ┌─────────────────┐
                    │   チェック項目   │
                    └────────┬────────┘
                             │
         ┌───────────────────┼───────────────────┐
         ▼                   ▼                   ▼
   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
   │  単純チェック  │    │ 関係性チェック │    │ 網羅性チェック │
   │  (通常RAG)   │    │  (GraphRAG)  │    │(オントロジー) │
   └──────────────┘    └──────────────┘    └──────────────┘
         │                   │                   │
         ▼                   ▼                   ▼
   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
   │ベクトル類似検索│    │ナレッジグラフ │    │ドメイン知識  │
   │              │    │   トラバース  │    │   体系参照   │
   └──────────────┘    └──────────────┘    └──────────────┘
```

#### 5.1.2 チェック種別と適用技術

| チェック種別 | 適用技術 | ユースケース例 |
|-------------|----------|---------------|
| 単純チェック | 通常RAG（ベクトル検索） | 用語定義の正確性、記述スタイルの準拠 |
| 関係性チェック | GraphRAG | ガイドライン条項との対応、文書間トレーサビリティ |
| 網羅性チェック | オントロジー参照 | 非機能要件カテゴリの網羅性、必須項目の欠落検出 |

### 5.2 ドメインオントロジー要件

#### FR-010: ドメインオントロジー構築
- **説明**: レビュー対象ドメインの知識体系をオントロジーとして構造化する
- **優先度**: High
- **対象ドメイン**:

| ドメイン | オントロジー内容 | 優先度 |
|----------|-----------------|--------|
| システム設計 | 設計パターン、アーキテクチャ概念、品質属性の関係性 | High |
| テスト計画 | テストレベル、テスト技法、品質指標の階層構造 | High |
| ガイドライン準拠 | デジタル・ガバメント推進標準ガイドライン群の概念体系 | Critical |

- **受入基準**:
  - 各ドメインの概念と関係性がRDF/OWL等の標準形式で定義されていること
  - ナレッジグラフとして検索・推論が可能であること

#### FR-011: ナレッジグラフ構築
- **説明**: オントロジーに基づきガイドライン・チェックリストをナレッジグラフ化する
- **優先度**: High
- **依存関係**: FR-010（ドメインオントロジー構築）
- **知識グラフ構造例**:

```
基本設計書 ─[contains]→ 機能要件 ─[traces_to]→ 要件定義
           ─[contains]→ 非機能要件 ─[categorized_by]→ {性能, セキュリティ, 可用性...}
           ─[must_comply]→ 標準ガイドライン ─[defines]→ チェック項目
                                            ─[has_section]→ セクション
```

- **受入基準**:
  - GraphDBまたは同等のグラフデータベースでクエリ可能であること
  - LLMからグラフ検索が呼び出し可能であること

### 5.3 ハイブリッドRAG要件

#### FR-012: 通常RAG機能
- **説明**: ベクトル類似度検索による関連文書・ガイドライン取得
- **優先度**: High
- **依存関係**: FR-002（データ収集・整備機能）、FR-003（LLM/Embeddingモデル選定）
- **受入基準**: Embeddingモデルによるベクトル検索が実装されていること

#### FR-013: GraphRAG機能
- **説明**: ナレッジグラフを活用した関係性ベースの検索・推論
- **優先度**: High
- **依存関係**: FR-011（ナレッジグラフ構築）
- **受入基準**:
  - グラフトラバースによる関連概念の取得ができること
  - 文書間のトレーサビリティ検証ができること
  - ガイドライン条項との対応関係を追跡できること

#### FR-014: チェック種別ルーティング
- **説明**: チェック項目の性質に応じて適切なRAG方式を自動選択する
- **優先度**: Medium
- **受入基準**: チェック項目のメタデータに基づき適切な検索方式が選択されること

---

## 6. 先行PoC課題への対応要件

### 6.1 チェックリスト品質

| ID | 課題 | 対応要件 |
|----|------|----------|
| REQ-POC-001 | チェックリストをAIで利用可能な形式に変換 | AIが正確に解釈できる方式の検討・実装 |
| REQ-POC-002 | チェックリスト項目の定義 | 明確な判定基準を持つチェック項目の整備 |

### 6.2 大容量/マルチフォーマット文書処理

| ID | 課題 | 対応要件 |
|----|------|----------|
| REQ-POC-003 | 数万〜数十万文字の大容量文書処理 | 文書分割、事前要約、必要箇所の抽出 |
| REQ-POC-004 | 処理効率化 | 軽量モデルと高性能モデルの使い分け |
| REQ-POC-005 | リッチコンテンツ対応 | 図表の取り扱い方式の確立 |

### 6.3 是正提案の妥当性評価

| ID | 課題 | 対応要件 |
|----|------|----------|
| REQ-POC-006 | 是正提案の妥当性評価 | 継続的に評価・改善するための評価基盤構築 |
| REQ-POC-007 | 回帰テスト環境 | 品質を継続的に監視するテスト環境の構築 |

### 6.4 庁内AI環境への適合

| ID | 課題 | 対応要件 |
|----|------|----------|
| REQ-POC-008 | UI/UX制約対応 | 庁内AI環境（源内）のUI/UX制約への対応 |
| REQ-POC-009 | 入出力形式対応 | 庁内AI環境の入出力形式への適合 |
| REQ-POC-010 | 権限管理 | 庁内AI環境の権限管理要件への対応 |
| REQ-POC-011 | 監査要件 | 庁内AI環境の監査要件への対応 |

---

## 7. 評価指標（KPI）

### 7.1 技術評価指標

| 指標 | 説明 | 目標値（仮説） | 測定方法 |
|------|------|----------------|----------|
| チェック合致率 | AIによるチェック結果と正解の一致率 | ≥ 80% | 評価データセットによる検証 |
| 処理時間 | ドキュメント1件あたりの処理時間 | ≤ 5分 | 実測値 |
| 推論コスト | API呼び出しコスト | ≤ $1.00/件 | 実測値 |
| 再現性 | 同一入力に対する出力の一貫性 | ≥ 90% | 複数回実行による検証 |

### 7.2 品質評価指標

| 指標 | 説明 | 目標値（仮説） | 測定方法 |
|------|------|----------------|----------|
| 是正提案精度 | AI是正提案の妥当性 | ≥ 70% | 専門家レビュー |
| False Positive率 | 誤検出率 | ≤ 20% | 評価データセットによる検証 |
| False Negative率 | 見逃し率 | ≤ 10% | 評価データセットによる検証 |

> **注記**: 目標値は仮説であり、PoC実施後に妥当性を検証し調整する

---

## 8. 制約条件

### 8.1 期間制約
- 契約期間: 契約日から令和8年3月31日まで
- 技術検証期間: 2ヶ月間

### 8.2 技術制約
- 庁内で利用可能なLLMから選定
- ISMAPクラウドサービスリスト登録サービスの使用
- ベンダーロックイン回避（特定事業者への依存禁止）

### 8.3 セキュリティ制約
- 機密情報を含まない評価データセットの使用を原則とする
- データの外部漏洩防止の担保

### 8.4 データ制約
- 情報資産を管理するデータセンタは国内設置が基本
- 日本国外への情報資産持ち出し禁止

### 8.5 技術リスク

| ID | リスク | 影響度 | 発生確率 | 対応策 |
|----|--------|--------|----------|--------|
| RISK-001 | オントロジー構築工数の超過 | High | Medium | MVP範囲を最小限のドメインに限定。既存オントロジー（標準ガイドライン構造等）の再利用 |
| RISK-002 | GraphRAG精度不足 | High | Medium | 通常RAGとの併用によるフォールバック。チェック種別ごとの適用判断 |
| RISK-003 | 大容量文書処理の性能問題 | Medium | High | 文書分割戦略の早期検証。軽量モデルによる前処理の導入 |
| RISK-004 | 庁内AI環境（源内）との統合障壁 | High | Medium | 早期の環境要件確認。APIベースの疎結合設計 |
| RISK-005 | 評価データセット品質不足 | Medium | Medium | 主管課との早期協議。段階的なデータセット拡充計画 |
---

## 9. 成果物一覧

| # | 成果物名 | 納品期限（想定） |
|---|----------|------------------|
| 1 | 業務実施計画書 | 契約締結後1週間以内 |
| 2 | AI活用方針定義資料 | PoC実施前まで |
| 3 | プロトタイプのソースコード、設定情報その他の必要な情報一式 | PoC完了時 |
| 4 | PoC検証報告書 | PoC完了時 |
| 5 | 令和8年度作業計画試案 | 契約満了前 |
| 6 | 業務完了報告書（成果物一覧、課題管理表、議事録等含む） | 契約満了前 |

---

## 10. スケジュール

### 10.1 マイルストーン

| Week | フェーズ | 主要タスク |
|------|----------|------------|
| Week 1 | プロジェクト立ち上げ | 業務実施計画書作成・提出、キックオフ、レビュー対象選定、庁内AI環境要件確認 |
| Week 2-4 | プロトタイプ開発・PoC準備 | チェックリスト整備、PoC環境準備、UI/UX設計、プロトタイプ開発 |
| Week 5-7 | PoC実施 | MVP によるPoC実施、結果分析・評価、改善点特定、次年度計画試案作成 |
| Week 8 | 最終報告・成果物作成 | PoC検証報告書作成、次年度計画試案最終稿、最終報告会 |

---

## 11. 関連文書

| 文書名 | 説明 |
|--------|------|
| 別紙1 ドキュメントレビュー支援AIエージェント 先行PoC結果報告書 | 先行PoCの結果と課題 |
| 別紙2 再委託承認申請書 | 再委託時の申請様式 |
| デジタル・ガバメント推進標準ガイドライン | 準拠すべきガイドライン |
| デジタル庁 行政の進化と革新のための生成AIの調達・利活用に係るガイドライン | AI利用時の参照ガイドライン |
| 政府機関等のサイバーセキュリティ対策のための統一基準 | セキュリティ準拠基準 |

---

## 12. 用語定義

| 用語 | 定義 |
|------|------|
| MVP | Minimum Viable Product - 最小限の実用可能な製品 |
| PoC | Proof of Concept - 概念実証 |
| RAG | Retrieval-Augmented Generation - 検索拡張生成 |
| GraphRAG | Graph-based RAG - ナレッジグラフを活用した検索拡張生成。概念間の関係性を辿った推論が可能 |
| LLM | Large Language Model - 大規模言語モデル |
| オントロジー | 特定ドメインの概念とその関係性を形式的に定義した知識体系。RDF/OWL等の標準形式で記述 |
| ナレッジグラフ | 概念（ノード）と関係（エッジ）で構成されるグラフ構造の知識表現 |
| PJMO | Project Management Office - プロジェクト管理組織 |
| 源内 | デジタル庁の庁内AI検証環境の名称 |
| ISMAP | Information system Security Management and Assessment Program - 政府情報システムのためのセキュリティ評価制度 |

---

## 変更履歴

| バージョン | 日付 | 変更内容 | 変更者 |
|------------|------|----------|--------|
| 1.0.0 | 2026-01-06 | 初版作成 | - |
| 1.1.0 | 2026-01-06 | レビュー指摘対応：セクション番号修正、NFR目標値設定、用語定義追加、技術リスク追加、優先度定義追加、依存関係明示 | - |
| 1.2.0 | 2026-01-06 | 残存指摘対応：KPI目標値追加、依存関係追加、書式修正 | - |

---

**生成元**: BidSpec/BidSpec.md（調達仕様書）
**MUSUBIX準拠**: Article III (Test-First Development), Article V (Traceability)
